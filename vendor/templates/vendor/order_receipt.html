<!DOCTYPE html>
<html>
<head>
    <style>
        body { font-family: 'Courier New', Courier, monospace; width: 80mm; margin: 0; padding: 5mm; color: #000; }
        .text-center { text-align: center; }
        .dashed-line { border-bottom: 1px dashed #000; margin: 5mm 0; }
        .bold { font-weight: bold; }
        .uppercase { text-transform: uppercase; }
        .item-row { display: flex; justify-content: space-between; margin-bottom: 2mm; }
        .pack-header { background: #000; color: #fff; padding: 1mm 2mm; margin-top: 4mm; font-size: 14px; }
        
        @media print {
            @page { margin: 0; }
            body { margin: 0; }
            .no-print { display: none; }
        }
    </style>
</head>
<body>
    <div class="no-print" style="margin-bottom: 20px;">
        <button onclick="window.print()" style="padding: 10px 20px; cursor: pointer;">Print Receipt</button>
        <button onclick="window.history.back()" style="padding: 10px 20px;">Back to Orders</button>
    </div>

    <div class="text-center">
        <h2 class="bold uppercase" style="margin: 0;">OSASCHOPS</h2>
        <p style="font-size: 12px; margin: 2mm 0;">The Levels are High!</p>
        <p class="bold" style="font-size: 18px;">ORDER #{{ order.id }}</p>
    </div>

    <div class="dashed-line"></div>

    <div style="font-size: 13px;">
        <p><strong>CUSTOMER:</strong> {{ order.name }}</p>
        <p><strong>PHONE:</strong> {{ order.phone }}</p>
        <p><strong>DATE:</strong> {{ order.created_at|date:"d/m/Y H:i" }}</p>
        <p><strong>ZONE:</strong> {{ order.delivery_zone.name }}</p>
    </div>

    {% for pack in order.packs.all %}
    <div class="pack-header bold uppercase">{{ pack.name }}</div>
    <div style="margin-top: 2mm;">
        {% for item in pack.items.all %}
        <div class="item-row">
            <span>{{ item.quantity }}x {{ item.product.name }}</span>
            <span>₦{{ item.get_cost }}</span>
        </div>
        {% endfor %}
    </div>
    {% endfor %}

    <div class="dashed-line"></div>

    <div class="bold" style="font-size: 14px;">
        <div class="item-row">
            <span>SUBTOTAL:</span>
            <span>₦{{ order.total_amount }}</span>
        </div>
        <div class="item-row">
            <span>DELIVERY:</span>
            <span>₦{{ order.delivery_zone.fee }}</span>
        </div>
        <div class="item-row" style="font-size: 18px; margin-top: 2mm;">
            <span>TOTAL:</span>
            <span>₦{{ order.total_amount|add:order.delivery_zone.fee }}</span>
        </div>
    </div>

    <div class="dashed-line"></div>

    <div class="text-center bold uppercase">
        <p style="font-size: 16px;">{{ order.payment_ref }}</p>
        {% if order.payment_ref == "Pay on Delivery" %}
            <p style="border: 2px solid #000; padding: 2mm;">COLLECT CASH</p>
        {% else %}
            <p>PAID ONLINE</p>
        {% endif %}
    </div>

    <div class="text-center" style="margin-top: 5mm; font-size: 11px;">
        <p>Thank you for choosing Osaschops!</p>
        <p>{{request.get_host}}</p>
    </div>

    <script>
        // Auto-open print dialog
        window.onload = function() {
            // window.print();
        }
    </script>
</body>
</html>